<html>
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link type="text/css" rel="stylesheet" href="./css/jquery.dropdown.css" />
</head>
<body>

	<div class="container">
		<div class="row">
			<div class="col-md-6">
				<header>
					<h1>Decision Tree</h1>
				</header>
			</div>
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-md-6">
				<p><a href="#" data-jq-dropdown="#jq-dropdown-1">dropdown</a></p>
				<div id="jq-dropdown-1" class="jq-dropdown">
					<ul class="jq-dropdown-menu">
						<li><a href="#1">Item 1</a></li>
						<li><a href="#2">Item 2</a></li>
						<li><a href="#3">Item 3</a></li>
						<li class="jq-dropdown-divider"></li>
						<li><a href="#4">Item 4</a></li>
						<li><a href="#5">Item 5</a></li>
						<li><a href="#5">Item 6</a></li>
					</ul>
				</div>
				

			</div>
			<div id="data" class="col-md-6">
				
			</div>
		</div>
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="./js/jquery.dropdown.min.js"></script>

	<script>
		var decisions = [];

		$.getJSON( "./decisions.json")
		.done(function( data ) {
			var items = [];
			decisions = data;
			optionStart();
		})
		.fail(function( jqxhr, textStatus, error ) {
			var err = textStatus + ", " + error;
			console.log( "Request Failed: " + err );
		});
		
		function optionClicked(){
			var id = document.getElementById('list').value;
			document.getElementById('list').remove();
			optionStart(id);
		}

		function optionStart(id = null){

			var results = $.grep(decisions, function(v) {
				return v.parent == id;
			});
			console.log(id);
			console.log(results);

			var items = ["<option>Select</option>"];
			$.each(results, function(idx, obj){
				if(obj.url === null){
					items.push( "<option value='" + obj.id + "'>" + obj.text + "</option>" );
				} else {
					items.push( "<option value='" + obj.id + "'>" + obj.text + "</option>" );
				}
			});

			$( "<select/>", {
				"id": "list",
				"onChange": "optionClicked();",
				html: items.join( "" )
			}).appendTo( "#data" );
			count++;
		}

		$('.list').click(function() {
			console.log($(this).val());
		})

	</script>
</body>
</html>